<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:,">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <style>
        /* Ascunde întregul conținut al paginii inițial */
        body > * {
            display: none;
        }
    </style>
</head>
<body>
<main>
    <nav>
        <h3>Scholarship</h3>
        <ul>
            <li><img src="img/ico/home.png" class="ico"><a href="index.html">Home</a></li>
            <li><img src="img/ico/profile.png" class="ico"><a href="profile.html">Profile</a></li>
            <li><img src="img/ico/paper.png" class="ico"><a href="docs.html">Docs</a></li>
        </ul>
        <a href="login.html" id="log-out">Log out</a>
    </nav>
    <section>
        <div class="image-back"></div>
        <p id="name">Scholarship Manager</p>
    </section>
    <section class="about">
        <p>
            Welcome to Scholarship Manager, your ultimate solution for managing student information and scholarship applications within a university environment.
            Our platform is designed to streamline the administrative processes for both students and faculty, making the experience seamless and efficient.
        </p>
        <br>
        <p>
            At Scholarship Manager, our mission is to empower educational institutions by providing a robust platform that simplifies the management of student information
            and scholarship processes. We aim to enhance the student experience by offering a reliable and efficient system that supports their academic and financial journey.

            Join us in creating a smarter, more organized academic environment with Scholarship Manager. Together, we can ensure that every student has the opportunity to
            succeed and access the financial support they need.
        </p>
    </section>
</main>
<footer>
    <h3>Scholarship <br> Manager</h3>
    <p>&copy; 2024 Scholarship Manager. All rights reserved.</p>
</footer>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        loadIndex();
    });

    function loadIndex() {
        var jwtToken = localStorage.getItem('jwtToken');
        if (!jwtToken) {
            alert("Trebuie să te loghezi pentru a accesa pagina index");
            window.location.href = 'login.html';  // Redirecționează către pagina de login
            return;
        }
        $.ajax({
            url: '/api/index',
            type: 'GET',
            beforeSend: function(xhr) {
                xhr.setRequestHeader('Authorization', 'Bearer ' + jwtToken);
            },
            success: function(data) {
                console.log("Acces permis.");
                // Afișează conținutul paginii
                document.querySelectorAll('body > *').forEach(function(element) {
                    element.style.display = 'block';
                });
            },
            error: function() {
                alert("Eroare de autentificare. Redirecționare către login.");
                localStorage.removeItem('jwtToken');
                window.location.href = 'login.html';
            }
        });
    }
</script>
</body>
</html>
